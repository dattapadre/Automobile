

    


    <%- include('navbar.ejs') %>
<div class="container bg-white  p-4 mb-5 mt-5">
  <div class="row mb-4">
    <div class="col-md-12">
      <div class="banner d-flex align-items-center rounded-3">
        <h3 class="text-white px-3">Automobile <i class="fa-solid fa-chevron-right"></i> Edit Product </h3>
        <div class="stripes"></div>
      </div>
    </div>
  </div>

  <div class="container mt-5 p-5 pt-2">
    <div class="card shadow-lg border-1">
      <div class="card-header bg-dark text-white">
        <h4 class="mb-0"><i class="bi bi-pencil-square"></i> Edit Product</h4>
      </div>

      <div class="card-body bg-light">
        <form action="/admin/update_product" method="POST" enctype="multipart/form-data">
          <input type="hidden" name="product_id" value="<%- result[0].product_id %>">

          <div class="row g-3">
            <!-- Product Name -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Product Name</label>
              <input type="text" name="product_name" class="form-control"
                value="<%- result[0].product_name %>" required>
            </div>

            <!-- Main Image -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Main Image</label>
              <input type="file" name="product_image" class="form-control">
           
            </div>

            <!-- Image 1 -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Image 1</label>
              <input type="file" name="product_image1" class="form-control">
             
            </div>

            <!-- Image 2 -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Image 2</label>
              <input type="file" name="product_image2" class="form-control">
              
            </div>

            <!-- Selling Price -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Selling Price</label>
              <input type="number" step="0.01" name="product_price" class="form-control"
                value="<%- result[0].product_price %>" required>
            </div>

            <!-- Market Price -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Market Price</label>
              <input type="number" step="0.01" name="product_market_price" class="form-control"
                value="<%- result[0].product_market_price %>">
            </div>

            <!-- Part Type -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Part Type</label>
              <select name="product_part_type" id="product_part_type" class="form-select" required>
                <option value="">Select</option>
                <option value="bodypart" <%= result[0].product_part_type=="bodypart"?"selected":"" %>>Body Part</option>
                <option value="Interior" <%= result[0].product_part_type=="Interior"?"selected":"" %>>Interior Parts</option>
                <option value="Suspension" <%= result[0].product_part_type=="Suspension"?"selected":"" %>>Suspension Parts</option>
                <option value="Air" <%= result[0].product_part_type=="Air"?"selected":"" %>>Air Suspension</option>
                <option value="Electric" <%= result[0].product_part_type=="Electric"?"selected":"" %>>Electric Parts</option>
                <option value="Engine" <%= result[0].product_part_type=="Engine"?"selected":"" %>>Engine Parts</option>
                <option value="Sensors" <%= result[0].product_part_type=="Sensors"?"selected":"" %>>Sensors</option>
                <option value="Brake" <%= result[0].product_part_type=="Brake"?"selected":"" %>>Brake Parts</option>
                <option value="AC" <%= result[0].product_part_type=="AC"?"selected":"" %>>AC Parts</option>
                <option value="Maintenance" <%= result[0].product_part_type=="Maintenance"?"selected":"" %>>Maintenance Parts</option>
              </select>
            </div>

            <!-- Sub Part -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Sub Part</label>
              <select name="product_sub_part" id="product_sub_part" class="form-select">
                <option value="<%- result[0].product_sub_part %>"><%- result[0].product_sub_part || "Select Part Type First" %></option>
              </select>
            </div>

            <!-- Vehicle -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Select Vehicle</label>
              <select name="product_vehicle_type_id" class="form-select">
                <option value="">Select</option>
                <% for (var i=0; i < vehicle.length; i++) { %>
                  <option value="<%- vehicle[i].vehicle_id %>" <%= vehicle[i].vehicle_id==result[0].product_vehicle_type_id?"selected":"" %>>
                    <%- vehicle[i].vehicle_name %>
                  </option>
                <% } %>
              </select>
            </div>

            <!-- Availability -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Availability</label>
              <select name="product_availability" class="form-select" required>
                <option value="in stock" <%= result[0].product_availability=="in stock"?"selected":"" %>>In Stock</option>
                <option value="out stock" <%= result[0].product_availability=="out stock"?"selected":"" %>>Out Stock</option>
              </select>
            </div>

            <!-- Trending -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Trending Product</label>
              <select name="product_trending" class="form-select">
                <option value="no" <%= result[0].product_trending=="no"?"selected":"" %>>No</option>
                <option value="yes" <%= result[0].product_trending=="yes"?"selected":"" %>>Yes</option>
              </select>
            </div>

            <!-- Added Date -->
            <div class="col-md-4">
              <label class="form-label fw-bold">Added Date</label>
              <input type="date" name="product_added_date" class="form-control"
                value="<%- result[0].product_added_date ? result[0].product_added_date.toISOString().split('T')[0] : '' %>">
            </div>

            <!-- Description -->
            <div class="col-md-12">
              <label class="form-label fw-bold">Description</label>
              <textarea name="product_description" class="form-control" rows="3" id="editor"><%- result[0].product_description %></textarea>
            </div>
          </div>

          <div class="text-end mt-4">
            <button type="submit" class="btn btn-success px-4">
              <i class="bi bi-save"></i> Update Product
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  const subParts = {
    bodypart: ["Front Bumper", "Rear Bumper","Lightings", "Side Mirror", "Accessories", "Maintenance Body Parts"],
    Interior: ["Seats", "Dashboard", "Ac Vents", "Air Bag Covers", "Seat Pockets", "Handle Set"],
    Suspension: ["Front Wheel Suspension", "Rear Wheel Suspension", "All Shockers Parts"],
    Air: ["Air Matic Shockers", "Electric Shockers", "Air Compressors", "Valve Blockers", "Air Compressor Repair Kit", "Air Balloons"],
    Electric: ["Fuel Pumps", "Fuel Lid Motors", "Fuel Relays", "Ignition Coil", "Spark Plugs", "Door Latchs", "Glass Machines", "Fan Relays"],
    Engine: ["Engine Suspension", "Timing Parts", "Engine Components"],
    Sensors: ["ABS Sensors", "Air Mask Sensors", "Level Sensors", "Temperature Sensors", "Cam Sensors", "Break Pad Sensors", "Tire Pressure Sensor", "Packing Sensors"],
    Brake: ["Front Brakes", "Rear Brakes", "Brake Calipers"],
    AC: ["AC Filter", "Air Filter", "Radiator", "Raditor Fan Assembly", "Blower Motor", "Cooling Coil", "Cooling Valve", "AC Compressor", "AC Condenser"],
    Maintenance: ["All Filters", "Auxilliary Battery", "Transmission Oil", "Towinf Washer Cap"]
  };

  // Pre-fill Sub Part
  document.addEventListener("DOMContentLoaded", function () {
    let partType = "<%- result[0].product_part_type %>";
    let currentSubPart = "<%- result[0].product_sub_part %>";
    let subPartSelect = document.getElementById("product_sub_part");

    if (partType && subParts[partType]) {
      subParts[partType].forEach(function (item) {
        let option = document.createElement("option");
        option.value = item;
        option.textContent = item;
        if (item === currentSubPart) option.selected = true;
        subPartSelect.appendChild(option);
      });
    }
  });
</script>

<%- include('footer.ejs') %>
