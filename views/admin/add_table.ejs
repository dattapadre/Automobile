<%-include('navbar.ejs')%>

<!-- QR Code Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
  body {
    background-color: #f8f9fa;
  }
  .table-container {
    margin: 50px auto;
    max-width: 1000px;
    background: #ffffff;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.05);
  }
  h2 {
    text-align: center;
    margin-bottom: 30px;
  }
  .table thead {
    background-color: #cad1db;
    color: #fff;
  }
  .table-hover tbody tr:hover {
    background-color: #f1f1f1;
  } 
  .qr-code {
    width: 80px;
    height: 80px;
  }
</style>

<!-- Add Table Form -->
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3">Add New Table</h5>
          <form action="/admin/save_table" method="POST">
            <div class="mb-3">
              <label for="tableName" class="form-label">Table Name</label>
              <input type="text" class="form-control" id="tableName" name="table_name" placeholder="Enter table name" required>
            </div>
            <div class="col-md-3">
              <button type="submit" class="btn btn-primary">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Table List -->
<div class="container table-container p-5">
  <h2 class="text-center m-3 mb-3">Table List</h2>
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>Sr No</th>
          <th>Name</th>
          <th>QR</th>
          <th>Enrolled Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% for (var i = 0; i < result.length; i++) { %>
          <tr>
            <td><%- i + 1 %></td>
            <td><%- result[i].table_name %></td>
            <td>
              <div id="qr-<%- result[i].tabel_id %>" class="qr-code"></div>
              <script>
                new QRCode(document.getElementById("qr-<%- result[i].tabel_id %>"), {
                  text: "http://localhost:1000/menu_list/<%- result[i].tabel_id %>",
                  width: 80,
                  height: 80
                });
              </script>
            </td>
            <td><%- result[i].add_date %></td>
            <td>
              <a href="/admin/edit_table/<%- result[i].tabel_id %>">
                <button class="btn btn-outline-primary">Edit</button>
              </a>
              <a href="/admin/delete_table/<%- result[i].tabel_id %>">
                <button class="btn btn-outline-danger">Delete</button>
              </a>
            </td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<%-include('footer.ejs')%>
