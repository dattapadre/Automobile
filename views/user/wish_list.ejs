<%-include('navbar.ejs')%>

<div class="container my-4">
  <h2 class="mb-3"><i class="far fa-heart text-danger"></i> My Wishlist</h2>

  <% if (products.length > 0) { %>
    <div class="row">
      <% products.forEach(function(p, index) { %>
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm h-100 position-relative">

            <!-- Like/Dislike Button (Wishlist Remove) -->
            <a href="/dislike/<%= p.product_id %>?redirect=/wish_list" 
               class="btn btn-light position-absolute top-0 end-0 m-2 rounded-circle shadow-sm" 
               title="Remove from Wishlist">
               <i class="fas fa-heart text-danger"></i>
            </a>

            <!-- Product Image -->
            <img src="/product/<%= p.product_image %>" 
                 class="card-img-top" 
                 alt="<%= p.product_name %>" 
                 style="height:200px; object-fit:cover;">
            
            <div class="card-body">
              <h5 class="card-title"><%= p.product_name %></h5>
              <p class="card-text mb-1">
                <span class="fw-bold text-success">₹ <%= p.product_price %></span>
                <small class="text-muted ms-2"><s>₹ <%= p.product_market_price %></s></small>
              </p>
              <p class="text-muted small">Availability: <%= p.product_availability %></p>
            </div>
            
            <div class="card-footer text-center bg-white">
              <!-- (Optional: Add to Cart button) -->
              <a href="/add_to_cart/<%= p.product_id %>" class="btn btn-sm btn-primary">
                <i class="fas fa-shopping-cart"></i> Add to Cart
              </a>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <div class="alert alert-warning">No items in wishlist.</div>
  <% } %>
</div>

<%-include('footer.ejs')%>
