<%- include('navbar.ejs') %>

<!--------------------- AOS CSS--------------- -->
<!-- <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet"> -->

<!-------------------------- Bootstrap CSS ------------------------------->
<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->

<!-------------------------- Custom CSS ------------------------------->
<link rel="stylesheet" type="text/css" href="css/product.css">

<br>
<div class="container-fluid">
  <div class="row">

    <!-- Sidebar: Brand -->
    <div class="col-lg-3 col-md-4 col-sm-12" data-aos="fade-right">
      <div class="sidebar mb-4">
        <h5>BRAND</h5>
        <ul class="list-unstyled">
          <% for (var i=0; i<categories.length; i++){ %>
            <li>
              <a href="/vehicle/<%-categories[i].vehicle_id%>" class="text-decoration-none"><%-categories[i].vehicle_name%></a>
            </li>
          <% } %>
        </ul>
        <button class="btn btn-dark w-100 mt-2">Apply Filters</button>
      </div>

      <!-- Sidebar: Price Range -->
    
    </div>

    <!-- Main Content -->
    <div class="col-lg-9 col-md-8 col-sm-12">
      <div class="filter-controls mb-3" data-aos="fade-down">
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <h4 class="section-title mb-0"></h4>
        </div>
      </div>

      <!-- Product Grid -->
      <div class="row">
        <% if(result.length > 0){ %>
          <% for(var i=0; i<result.length; i++){ %>
            <div class="col-md-4 col-sm-6 col-12 mb-4" data-aos="zoom-in" data-aos-delay="100">
              <div class="product-card shadow-sm h-100">
                <img src="/product/<%-result[i].product_image%>" alt="Seat Pocket" class="product-img">
                
                <a href="/product_details/<%-result[i].product_id%>" class="text-decoration-none text-dark">
                  <div class="product-body p-2">
                    <div class="product-title fw-semibold">
                      <%- (result[i].product_name || "").split(/\s+/).slice(0,5).join(" ") %> ...
                    </div>
                    <div class="product-price">
                      <span class="old-price text-muted text-decoration-line-through">
                        ₹<%-result[i].product_market_price%>
                      </span>
                      <span class="new-price text-success fw-bold ms-2">
                        ₹<%-result[i].product_price%>
                      </span>
                    </div>
                  </div>
                </a>

                <div class="p-2 d-flex gap-2">
                  <!-- Add to Cart -->
                  <button class="btn  flex-fill btn-add-to-cart"
                    onclick="my_cart('<%-result[i].product_id%>')">
                    ADD TO CART
                  </button>

                  <!-- Wishlist -->

                  <% if(result[i].like_wish=='like'){ %>
                    <button class="btn btn-danger text-white border-danger flex-fill btn-wishlist"
                    onclick="dislike('<%-result[i].product_id%>')">
                    ❤ 
                  </button>
                     
                  <% }else{ %>
                     <button class="btn btn-white text-danger border-danger flex-fill btn-wishlist"
                    onclick="like('<%-result[i].product_id%>')">
                    ❤ 
                  </button>
                  <% } %>

                 
                </div>
              </div>
            </div>
          <% } %>
        <% } else { %>
          <div class="card text-center shadow-sm p-4 mx-auto" style="max-width: 350px;">
            <div class="mb-3">
              <div class="bg-danger rounded-circle d-flex justify-content-center align-items-center mx-auto"
                style="width:60px; height:60px;">
                <span class="text-white fs-3">&times;</span>
              </div>
            </div>
            <h5 class="text-danger fw-bold">No Products Available</h5>
            <p class="text-muted mb-4">
              We’re sorry, but there are currently no products to display. Please check back later!
            </p>
            <a href="/" class="btn btn-success">&larr; Back to Home</a>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</div>

<!------------------- AOS JS ------------------->
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
  AOS.init({ duration: 800, once: true });
</script>

<!------------------- Cart & Wishlist Script ------------------->
<script>
  
</script>

<script>
function like(id) {
    const currentPage = encodeURIComponent(window.location.href);

    location.href = `/like/${id}?redirect=${currentPage}`;
}

function dislike(id) {
    const currentPage = encodeURIComponent(window.location.href);
    location.href = `/dislike/${id}?redirect=${currentPage}`;
}


</script>


<%- include('footer.ejs') %>
