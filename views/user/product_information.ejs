<%-include('navbar.ejs')%>
  <div class="page-container py-4">
    <link rel="stylesheet" href="/css/product_details.css">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">Home &gt; product details</li>

      </ol>
    </nav>

    <div class="row g-4">

      <!-- Product Image -->
      <div class="col-lg-6 text-center">
        <img id="mainImage" src="/product/<%-result[0].product_image%>" class="img-fluid main-img mb-3"
          alt="Main Product Image">

        <!-- Thumbnails -->
        <div class="row g-2 justify-content-center">
          <div class="col-4">
            <img src="/product/<%-result[0].product_image1%>" class="w-100 thumb-img active"
              data-src="https://atozautopartsindia.com/cdn/shop/files/41sq2THmwzL.jpg?v=1693807870" alt="Thumb 1">
          </div>
          <div class="col-4">
            <img src="/product/<%-result[0].product_image2%>" class="w-100 thumb-img"
              data-src="https://atozautopartsindia.com/cdn/shop/files/51wBq9Bk7kL_medium.jpg?v=1693807869"
              alt="Thumb 2">
          </div>
        </div>
      </div>

      <!-- Product Details -->
      <div class="col-lg-6">
        <h1 class="product-title">
          <%-result[0].product_name%>
        </h1>

        <p class="text-muted mb-1"><%-result[0].product_description%></p>
        <p class="mb-1"><strong>Vendor:</strong><%-result[0].product_part_type%></p>
        <p class="mb-1"><strong>SKU:</strong> <%-result[0].product_sub_part%></p>
        <p class="mb-3"><strong>Availability:</strong><%-result[0].product_availability%></p>

        <!-- Price -->
        <p>
          <span class="old-price">Rs.<%-result[0].product_market_price%></span>
          <span class="new-price">Rs. <%-result[0].product_price%></span>
        </p>

        <!-- Quantity -->
        <div class="mb-3">
          <label class="form-label fw-bold">Quantity:</label>
          <div class="d-flex align-items-center gap-2">
            <div class="quantity-control">
              <button onclick="decrese()">-</button>
              <span id="qty">1</span>
              <button onclick="increase()">+</button>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="d-flex m-4">
          <button class="btn-add-cart w-50 btn btn-primary" onclick="add_to_cart()">ADD TO CART</button>
          <%if(is_login){%>
          <button class="btn-buy w-50 btn btn-danger" onclick="buy_now()">Buy it now</button>
          <%}else{%>
             <button class="btn-buy w-50 btn btn-dark" data-bs-toggle="modal" data-bs-target="#signupModal"> Buy it now</button>
          <%}%>
        </div>

        <!-- Secure Checkout -->
        <div class="mt-4">
          <p class="fw-bold mb-1">Secure checkout with</p>
          <div class="d-flex flex-wrap align-items-center gap-3">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Mastercard-logo.png" alt="MasterCard"
              style="height:30px;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Visa_Logo.png" alt="Visa"
              style="height:30px;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_Pay_Logo.png" alt="Google Pay"
              style="height:30px;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/f/f5/PhonePe_Logo.png" alt="PhonePe"
              style="height:30px;">
          </div>
        </div>

        <!-- Free Shipping -->
        <div class="mt-3 d-flex align-items-start">
          <i class="bi bi-truck me-2" style="font-size: 1.5rem;"></i>
          <div>
            <p class="fw-bold mb-0">Free Shipping</p>
            <small class="text-muted">Free standard shipping on all orders</small>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="mt-5">
      <ul class="nav nav-tabs custom-tabs justify-content-center" id="productTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#desc" type="button" role="tab">
            Description
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#shipping" type="button" role="tab">
            Shipping & Return
          </button>
        </li>
      </ul>

      <div class="tab-content p-4 custom-tab-content" id="productTabsContent">
        <div class="tab-pane fade show active" id="desc" role="tabpanel">
          <h6>Features:</h6>
          <ul class="feature-list">
            <li><%-result[0].product_description%></li>
          </ul>
          <p>
            Details: Please kindly check your car model and make sure the model fits. M5 Performance Front Kidney Bumper
            ABS Grille M Sport Carbon Fiber Grill Cover For BMW 5 Series G30 G31 G38 LCI 2020-2022. Made from
            high-quality ABS material with UV-protected coating.
          </p>
        </div>
        <div class="tab-pane fade" id="shipping" role="tabpanel">
          <h5>Shipping</h5>
          <p>We regret to inform you that we do not accept returns or offer refunds. All sales are final. Please
            carefully consider your selections before purchasing.</p>
          <h5>Return</h5>
          <p>We can ship to most addresses worldwide. Some restrictions apply. Shipping rates are weight-based, rounded
            up to the next full pound.</p>
        </div>
      </div>
    </div>

  </div>


  <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content rounded-4 shadow ">
      <div class="modal-header bg-info text-dark">
        <h5 class="modal-title" id="signupModalLabel">Sign Up</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form onsubmit="signin(event)" enctype="multipart/form-data">
          <!-- Name -->
          <div class="mb-3">
            <label for="name" class="form-label">Full Name</label>
            <input type="text" id="name" class="form-control" placeholder="Enter your name" required>
          </div>
          <!-- Mobile -->
          <div class="mb-3">
            <label for="mobile" class="form-label">Mobile Number</label>
            <input type="tel" id="mobile" class="form-control" placeholder="Enter mobile number" required>
          </div>
          <!-- Email -->
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input type="email" id="email" class="form-control" placeholder="Enter email" required>
          </div>


          <!-- Submit -->
          <div class="d-grid">
            <button type="submit" class="btn btn-success">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
  <%-include('footer.ejs')%>
    <script>
      function increase() {
        var increase = document.getElementById('qty').innerText;
        document.getElementById('qty').innerText =Number(increase) + 1;
      }

      function decrese() {
        var decrese = document.getElementById('qty').innerText;
        if (decrese > 1) {
          document.getElementById('qty').innerText = decrese -1;
        }
      }
      function add_to_cart(id){
        var qty = document.getElementById('qty').innerText;
        var url =  `/add_to_cart/<%-result[0].product_id%>?qty=${qty}`
        location.href = url;
      }
      function buy_now(){
        var qty = document.getElementById('qty').innerText;
        var url =  `/buy_now/<%-result[0].product_id%>?qty=${qty}`
        location.href = url;
      }

    </script>